00:00 +0: loading /app/test/features/chat/chat_provider_test.dart                                                                                                                                      00:01 +0: loading /app/test/features/chat/chat_provider_test.dart                                                                                                                                      00:02 +0: loading /app/test/features/chat/chat_provider_test.dart                                                                                                                                      00:03 +0: loading /app/test/features/chat/chat_provider_test.dart                                                                                                                                      00:04 +0: loading /app/test/features/chat/chat_provider_test.dart                                                                                                                                      00:05 +0: loading /app/test/features/chat/chat_provider_test.dart                                                                                                                                      00:05 +0: /app/test/features/chat/chat_provider_test.dart: ChatNotifier maintains history and sends message correctly                                                                                  00:06 +0: /app/test/features/chat/chat_provider_test.dart: ChatNotifier maintains history and sends message correctly                                                                                  00:06 +1: /app/test/features/chat/chat_provider_test.dart: ChatNotifier maintains history and sends message correctly                                                                                  00:06 +1: /app/test/features/chat/chat_provider_test.dart: ChatNotifier handles streamed response correctly                                                                                            00:06 +2: /app/test/features/chat/chat_provider_test.dart: ChatNotifier handles streamed response correctly                                                                                            00:06 +2: /app/test/features/chat/chat_provider_test.dart: ChatNotifier updates settings correctly                                                                                                     00:06 +3: /app/test/features/chat/chat_provider_test.dart: ChatNotifier updates settings correctly                                                                                                     00:07 +3: /app/test/features/chat/chat_provider_test.dart: ChatNotifier updates settings correctly                                                                                                     00:07 +3: loading /app/test/features/chat/presentation/screens/chat_history_screen_render_test.dart                                                                                                    00:07 +3: /app/test/features/chat/presentation/screens/chat_history_screen_render_test.dart: ChatHistoryScreen uses CustomScrollView for performance                                                   00:08 +3: /app/test/features/chat/presentation/screens/chat_history_screen_render_test.dart: ChatHistoryScreen uses CustomScrollView for performance                                                   00:08 +4: /app/test/features/chat/presentation/widgets/chat_input_test.dart: ChatInput has maxLength set to AppConstants.maxInputLength                                                                00:09 +4: /app/test/features/chat/presentation/widgets/chat_input_test.dart: ChatInput has maxLength set to AppConstants.maxInputLength                                                                00:09 +5: /app/test/features/chat/presentation/widgets/chat_input_test.dart: ChatInput has maxLength set to AppConstants.maxInputLength                                                                00:09 +5: loading /app/test/core/utils/image_decoder_test.dart                                                                                                                                         00:09 +5: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder decodes images correctly                                                                                                   00:09 +6: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder decodes images correctly                                                                                                   00:09 +6: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder caches decoded images                                                                                                      00:09 +7: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder caches decoded images                                                                                                      00:09 +7: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder respects LRU eviction policy                                                                                               00:09 +8: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder respects LRU eviction policy                                                                                               00:09 +8: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder handles empty list                                                                                                         00:09 +9: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder handles empty list                                                                                                         00:10 +9: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder handles empty list                                                                                                         00:10 +9: loading /app/test/core/utils/url_validator_test.dart                                                                                                                                         00:10 +9: /app/test/core/utils/url_validator_test.dart: UrlValidator allows http and https                                                                                                             00:10 +10: /app/test/core/utils/url_validator_test.dart: UrlValidator allows http and https                                                                                                            00:10 +10: /app/test/core/utils/url_validator_test.dart: UrlValidator allows mailto                                                                                                                    00:10 +11: /app/test/core/utils/url_validator_test.dart: UrlValidator allows mailto                                                                                                                    00:10 +11: /app/test/core/utils/url_validator_test.dart: UrlValidator blocks javascript scheme                                                                                                         00:10 +12: /app/test/core/utils/url_validator_test.dart: UrlValidator blocks javascript scheme                                                                                                         00:10 +12: /app/test/core/utils/url_validator_test.dart: UrlValidator blocks file scheme                                                                                                               00:10 +13: /app/test/core/utils/url_validator_test.dart: UrlValidator blocks file scheme                                                                                                               00:10 +13: /app/test/core/utils/url_validator_test.dart: UrlValidator blocks unknown schemes                                                                                                           00:10 +14: /app/test/core/utils/url_validator_test.dart: UrlValidator blocks unknown schemes                                                                                                           00:10 +14: /app/test/core/utils/url_validator_test.dart: UrlValidator handles invalid uris                                                                                                             00:10 +15: /app/test/core/utils/url_validator_test.dart: UrlValidator handles invalid uris                                                                                                             00:10 +15: /app/test/core/utils/url_validator_test.dart: UrlValidator handles mixed case schemes                                                                                                       00:10 +16: /app/test/core/utils/url_validator_test.dart: UrlValidator handles mixed case schemes                                                                                                       00:10 +16: /app/test/core/utils/url_validator_test.dart: UrlValidator isHttpUrlString strictly enforces http/https                                                                                     00:10 +17: /app/test/core/utils/url_validator_test.dart: UrlValidator isHttpUrlString strictly enforces http/https                                                                                     00:10 +17: loading /app/test/widget_test.dart                                                                                                                                                          00:10 +17: /app/test/widget_test.dart: App smoke test                                                                                                                                                  00:11 +17: /app/test/widget_test.dart: App smoke test                                                                                                                                                  00:11 +18: /app/test/widget_test.dart: App smoke test                                                                                                                                                  00:11 +18: loading /app/test/services/storage_service_csv_injection_test.dart                                                                                                                          00:11 +18: /app/test/services/storage_service_csv_injection_test.dart: StorageService CSV Injection Security exportToCsv escapes malicious formula characters                                          00:11 +19: /app/test/services/storage_service_csv_injection_test.dart: StorageService CSV Injection Security exportToCsv escapes malicious formula characters                                          00:11 +19: /app/test/services/storage_service_csv_injection_test.dart: StorageService CSV Injection Security exportToCsv escapes malicious characters with quoting                                     00:11 +20: /app/test/services/storage_service_csv_injection_test.dart: StorageService CSV Injection Security exportToCsv escapes malicious characters with quoting                                     00:12 +20: /app/test/services/storage_service_csv_injection_test.dart: StorageService CSV Injection Security exportToCsv escapes malicious characters with quoting                                     00:12 +20: loading /app/test/services/ollama_service_test.dart                                                                                                                                         00:12 +20: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream prepends system prompt correctly                                                                        00:12 +21: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream prepends system prompt correctly                                                                        00:12 +21: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream includes options (temperature, top_p)                                                                   00:12 +22: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream includes options (temperature, top_p)                                                                   00:12 +22: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream sends correct history                                                                                   00:12 +23: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream sends correct history                                                                                   00:12 +23: loading /app/test/services/ollama_service_security_test.dart                                                                                                                                00:12 +23: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl throws ArgumentError for invalid schemes                                                   00:13 +23: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl throws ArgumentError for invalid schemes                                                   00:13 +24: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl throws ArgumentError for invalid schemes                                                   00:13 +24: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl throws ArgumentError for non-url strings                                                   00:13 +25: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl throws ArgumentError for non-url strings                                                   00:13 +25: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl accepts valid http/https urls                                                              00:13 +26: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl accepts valid http/https urls                                                              00:13 +26: loading /app/test/services/storage_service_statistics_test.dart                                                                                                                             00:13 +26: /app/test/services/storage_service_statistics_test.dart: StorageService Statistics Tests getUsageStatistics calculates correct values                                                       00:13 +27: /app/test/services/storage_service_statistics_test.dart: StorageService Statistics Tests getUsageStatistics calculates correct values                                                       00:13 +27: /app/test/services/storage_service_statistics_test.dart: StorageService Statistics Tests getUsageStatistics handles empty data                                                              00:13 +28: /app/test/services/storage_service_statistics_test.dart: StorageService Statistics Tests getUsageStatistics handles empty data                                                              00:14 +28: /app/test/services/storage_service_statistics_test.dart: StorageService Statistics Tests getUsageStatistics handles empty data                                                              00:14 +28: loading /app/test/services/storage_service_settings_export_test.dart                                                                                                                        00:14 +28: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData includes settings when requested                                              00:14 +29: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData includes settings when requested                                              00:14 +29: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData excludes settings when not requested                                          00:14 +30: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData excludes settings when not requested                                          00:14 +30: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData excludes settings by default                                                  00:14 +31: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData excludes settings by default                                                  00:14 +31: loading /app/test/services/storage_service_pin_test.dart                                                                                                                                    00:14 +31: /app/test/services/storage_service_pin_test.dart: StorageService Pinning togglePin adds and removes pin and logs activity                                                                   00:14 +32: /app/test/services/storage_service_pin_test.dart: StorageService Pinning togglePin adds and removes pin and logs activity                                                                   00:15 +32: /app/test/services/storage_service_pin_test.dart: StorageService Pinning togglePin adds and removes pin and logs activity                                                                   00:15 +32: loading /app/test/services/pdf_export_service_test.dart                                                                                                                                     00:15 +32: /app/test/services/pdf_export_service_test.dart: PdfExportService generates PDF data                                                                                                        00:15 +32: /app/test/services/pdf_export_service_test.dart: PdfExportService generates PDF data
Helvetica-Bold has no Unicode support see https://github.com/DavBfr/dart_pdf/wiki/Fonts-Management
Helvetica has no Unicode support see https://github.com/DavBfr/dart_pdf/wiki/Fonts-Management
Unable to find a font to draw "â€¢" (U+2022) try to provide a TextStyle.fontFallback
00:15 +33: /app/test/services/pdf_export_service_test.dart: PdfExportService generates PDF data                                                                                                        00:16 +33: /app/test/services/pdf_export_service_test.dart: PdfExportService generates PDF data                                                                                                        00:16 +33: loading /app/test/services/storage_service_markdown_test.dart                                                                                                                               00:16 +33: /app/test/services/storage_service_markdown_test.dart: StorageService - Markdown Export Escapes malicious Markdown structure in messages                                                    00:16 +33 -1: /app/test/services/storage_service_markdown_test.dart: StorageService - Markdown Export Escapes malicious Markdown structure in messages [E]
  Expected: contains '> Hello'
    Actual: '# PocketLLM Lite Chat Export\n'
              'Exported on: 2026-02-03 08:14:18.938026\n'
              '\n'
              '## Injection Test\n'
              '**Model:** llama3\n'
              '**Date:** 2025-01-01 00:00:00.000\n'
              '\n'
              '### User\n'
              '```text\n'
              'Hello\n'
              '### Assistant\n'
              'I am fake\n'
              '```\n'
              '\n'
              '---\n'
              '\n'
              ''
     Which: does not contain '> Hello'

  package:matcher                                        expect
  package:flutter_test/src/widget_tester.dart 473:18     expect
  test/services/storage_service_markdown_test.dart 28:7  main.<fn>.<fn>


To run this test again: /opt/flutter/bin/cache/dart-sdk/bin/dart test /app/test/services/storage_service_markdown_test.dart -p vm --plain-name 'StorageService - Markdown Export Escapes malicious Markdown structure in messages'
00:16 +33 -1: /app/test/services/storage_service_markdown_test.dart: StorageService - Markdown Export Preserves multiline content in blockquotes                                                       00:16 +33 -2: /app/test/services/storage_service_markdown_test.dart: StorageService - Markdown Export Preserves multiline content in blockquotes [E]
  Expected: contains '> Line 1'
    Actual: '# PocketLLM Lite Chat Export\n'
              'Exported on: 2026-02-03 08:14:19.071478\n'
              '\n'
              '## Multiline Test\n'
              '**Model:** llama3\n'
              '**Date:** 2025-01-01 00:00:00.000\n'
              '\n'
              '### Assistant\n'
              '```text\n'
              'Line 1\n'
              'Line 2\n'
              '```\n'
              '\n'
              '---\n'
              '\n'
              ''
     Which: does not contain '> Line 1'

  package:matcher                                        expect
  package:flutter_test/src/widget_tester.dart 473:18     expect
  test/services/storage_service_markdown_test.dart 38:7  main.<fn>.<fn>


To run this test again: /opt/flutter/bin/cache/dart-sdk/bin/dart test /app/test/services/storage_service_markdown_test.dart -p vm --plain-name 'StorageService - Markdown Export Preserves multiline content in blockquotes'
00:16 +33 -2: loading /app/test/services/storage_service_export_test.dart                                                                                                                              00:16 +33 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportData filters by chatIds                                                                           00:16 +34 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportData filters by chatIds                                                                           00:16 +34 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportData includes all if chatIds is null                                                              00:16 +35 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportData includes all if chatIds is null                                                              00:16 +35 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportToCsv filters by chatIds                                                                          00:16 +36 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportToCsv filters by chatIds                                                                          00:16 +36 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportToMarkdown filters by chatIds                                                                     00:16 +37 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportToMarkdown filters by chatIds                                                                     00:17 +37 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportToMarkdown filters by chatIds                                                                     00:17 +37 -2: loading /app/test/services/storage_service_log_test.dart                                                                                                                                 00:17 +37 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportData logs activity                                                                               00:17 +38 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportData logs activity                                                                               00:17 +38 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportToCsv logs activity                                                                              00:17 +39 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportToCsv logs activity                                                                              00:17 +39 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportToMarkdown logs activity                                                                         00:17 +40 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportToMarkdown logs activity                                                                         00:17 +40 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportActivityLogsToCsv logs activity and returns correct format                                       00:17 +41 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportActivityLogsToCsv logs activity and returns correct format                                       00:17 +41 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportActivityLogsToJson logs activity and returns correct format                                      00:17 +42 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportActivityLogsToJson logs activity and returns correct format                                      00:17 +42 -2: loading /app/test/services/ollama_service_pull_streaming_test.dart                                                                                                                       00:17 +42 -2: /app/test/services/ollama_service_pull_streaming_test.dart: OllamaService Pull Streaming Tests pullModel handles split JSON chunks correctly                                             00:17 +43 -2: /app/test/services/ollama_service_pull_streaming_test.dart: OllamaService Pull Streaming Tests pullModel handles split JSON chunks correctly                                             00:18 +43 -2: /app/test/services/ollama_service_pull_streaming_test.dart: OllamaService Pull Streaming Tests pullModel handles split JSON chunks correctly                                             00:18 +43 -2: loading /app/test/services/storage_service_search_test.dart                                                                                                                              00:18 +43 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by query (case insensitive)                                                             00:18 +44 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by query (case insensitive)                                                             00:18 +44 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by query (no match)                                                                     00:18 +45 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by query (no match)                                                                     00:18 +45 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by message content                                                                      00:18 +46 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by message content                                                                      00:18 +46 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by message content (assistant response)                                                 00:18 +47 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by message content (assistant response)                                                 00:18 +47 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Filter by Model                                                                                00:18 +48 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Filter by Model                                                                                00:18 +48 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Filter by Date (Last 7 days)                                                                   00:18 +49 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Filter by Date (Last 7 days)                                                                   00:18 +49 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Combined Filter (Query + Model)                                                                00:18 +50 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Combined Filter (Query + Model)                                                                00:18 +50 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Combined Filter (Query + Date)                                                                 00:18 +51 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Combined Filter (Query + Date)                                                                 00:18 +51 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Get Available Models                                                                           00:18 +52 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Get Available Models                                                                           00:19 +52 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Get Available Models                                                                           00:19 +52 -2: loading /app/test/services/csv_security_test.dart                                                                                                                                        00:19 +52 -2: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with dangerous characters                                                                00:19 +53 -2: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with dangerous characters                                                                00:19 +53 -2: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with Tab and Carriage Return                                                             00:19 +54 -2: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with Tab and Carriage Return                                                             00:19 +54 -2: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with whitespace and dangerous characters                                                 00:19 +55 -2: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with whitespace and dangerous characters                                                 00:19 +55 -2: loading /app/test/services/ollama_service_streaming_test.dart                                                                                                                            00:19 +55 -2: /app/test/services/ollama_service_streaming_test.dart: OllamaService Streaming Tests generateChatStream handles split JSON chunks correctly                                              00:19 +55 -2: /app/test/services/ollama_service_streaming_test.dart: OllamaService Streaming Tests generateChatStream handles split JSON chunks correctly
Collected output: [Hello , world!]
00:19 +56 -2: /app/test/services/ollama_service_streaming_test.dart: OllamaService Streaming Tests generateChatStream handles split JSON chunks correctly                                              00:19 +56 -2: Some tests failed.
