00:00 +0: loading /app/test/markdown_injection_test.dart                                                                                                                                               00:01 +0: loading /app/test/markdown_injection_test.dart                                                                                                                                               00:02 +0: loading /app/test/markdown_injection_test.dart                                                                                                                                               00:02 +0: /app/test/markdown_injection_test.dart: Markdown injection fix verification                                                                                                                  00:02 +0: /app/test/markdown_injection_test.dart: Markdown injection fix verification
Output:
### System Prompt
> Line 1
> ### Hacked Header


00:02 +1: /app/test/markdown_injection_test.dart: Markdown injection fix verification                                                                                                                  00:03 +1: /app/test/markdown_injection_test.dart: Markdown injection fix verification                                                                                                                  00:03 +1: loading /app/test/features/chat/chat_provider_test.dart                                                                                                                                      00:03 +1: /app/test/features/chat/chat_provider_test.dart: ChatNotifier maintains history and sends message correctly                                                                                  00:03 +2: /app/test/features/chat/chat_provider_test.dart: ChatNotifier maintains history and sends message correctly                                                                                  00:03 +2: /app/test/features/chat/chat_provider_test.dart: ChatNotifier handles streamed response correctly                                                                                            00:03 +3: /app/test/features/chat/chat_provider_test.dart: ChatNotifier handles streamed response correctly                                                                                            00:03 +3: /app/test/features/chat/chat_provider_test.dart: ChatNotifier updates settings correctly                                                                                                     00:03 +4: /app/test/features/chat/chat_provider_test.dart: ChatNotifier updates settings correctly                                                                                                     00:04 +4: /app/test/features/chat/chat_provider_test.dart: ChatNotifier updates settings correctly                                                                                                     00:04 +4: loading /app/test/features/chat/presentation/screens/chat_history_screen_render_test.dart                                                                                                    00:04 +4: /app/test/features/chat/presentation/screens/chat_history_screen_render_test.dart: ChatHistoryScreen uses CustomScrollView for performance                                                   00:05 +4: /app/test/features/chat/presentation/screens/chat_history_screen_render_test.dart: ChatHistoryScreen uses CustomScrollView for performance                                                   00:05 +5: /app/test/features/chat/presentation/widgets/chat_input_test.dart: ChatInput has maxLength set to AppConstants.maxInputLength                                                                00:05 +5: /app/test/features/chat/presentation/widgets/chat_input_test.dart: ChatInput has maxLength set to AppConstants.maxInputLength
══╡ EXCEPTION CAUGHT BY WIDGETS LIBRARY ╞═══════════════════════════════════════════════════════════
The following LateError was thrown building KeyedSubtree-[GlobalKey#2eedd]:
LateInitializationError: Field '_settingsBox@25089923' has not been initialized.

The relevant error-causing widget was:
  Scaffold Scaffold:file:///app/test/features/chat/presentation/widgets/chat_input_test.dart:33:17

When the exception was thrown, this was the stack:
#0      StorageService._settingsBox (package:pocketllm_lite/services/storage_service.dart)
#1      StorageService._getDraftsMap (package:pocketllm_lite/services/storage_service.dart:415:20)
#2      StorageService.getDraft (package:pocketllm_lite/services/storage_service.dart:438:20)
#3      _ChatInputState._loadDraft (package:pocketllm_lite/features/chat/presentation/widgets/chat_input.dart:60:27)
#4      _ChatInputState.initState (package:pocketllm_lite/features/chat/presentation/widgets/chat_input.dart:35:5)
#5      StatefulElement._firstBuild (package:flutter/src/widgets/framework.dart:5953:55)
#6      ComponentElement.mount (package:flutter/src/widgets/framework.dart:5796:5)
...     Normal element mounting (25 frames)
#31     Element.inflateWidget (package:flutter/src/widgets/framework.dart:4590:20)
#32     MultiChildRenderObjectElement.inflateWidget (package:flutter/src/widgets/framework.dart:7269:36)
#33     MultiChildRenderObjectElement.mount (package:flutter/src/widgets/framework.dart:7285:32)
...     Normal element mounting (364 frames)
#397    Element.inflateWidget (package:flutter/src/widgets/framework.dart:4590:20)
#398    MultiChildRenderObjectElement.inflateWidget (package:flutter/src/widgets/framework.dart:7269:36)
#399    MultiChildRenderObjectElement.mount (package:flutter/src/widgets/framework.dart:7285:32)
...     Normal element mounting (487 frames)
#886    Element.inflateWidget (package:flutter/src/widgets/framework.dart:4590:20)
#887    Element.updateChild (package:flutter/src/widgets/framework.dart:4053:20)
#888    ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5844:16)
#889    Element.rebuild (package:flutter/src/widgets/framework.dart:5532:7)
#890    ProxyElement.update (package:flutter/src/widgets/framework.dart:6152:5)
#891    _InheritedNotifierElement.update (package:flutter/src/widgets/inherited_notifier.dart:108:11)
#892    Element.updateChild (package:flutter/src/widgets/framework.dart:4037:15)
#893    ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5844:16)
#894    StatefulElement.performRebuild (package:flutter/src/widgets/framework.dart:5985:11)
#895    Element.rebuild (package:flutter/src/widgets/framework.dart:5532:7)
#896    StatefulElement.update (package:flutter/src/widgets/framework.dart:6010:5)
#897    Element.updateChild (package:flutter/src/widgets/framework.dart:4037:15)
#898    ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5844:16)
#899    Element.rebuild (package:flutter/src/widgets/framework.dart:5532:7)
#900    ProxyElement.update (package:flutter/src/widgets/framework.dart:6152:5)
#901    _InheritedNotifierElement.update (package:flutter/src/widgets/inherited_notifier.dart:108:11)
#902    Element.updateChild (package:flutter/src/widgets/framework.dart:4037:15)
#903    ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5844:16)
#904    StatefulElement.performRebuild (package:flutter/src/widgets/framework.dart:5985:11)
#905    Element.rebuild (package:flutter/src/widgets/framework.dart:5532:7)
#906    StatefulElement.update (package:flutter/src/widgets/framework.dart:6010:5)
#907    Element.updateChild (package:flutter/src/widgets/framework.dart:4037:15)
#908    ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5844:16)
#909    StatefulElement.performRebuild (package:flutter/src/widgets/framework.dart:5985:11)
#910    Element.rebuild (package:flutter/src/widgets/framework.dart:5532:7)
#911    StatefulElement.update (package:flutter/src/widgets/framework.dart:6010:5)
#912    Element.updateChild (package:flutter/src/widgets/framework.dart:4037:15)
#913    ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5844:16)
#914    Element.rebuild (package:flutter/src/widgets/framework.dart:5532:7)
#915    ProxyElement.update (package:flutter/src/widgets/framework.dart:6152:5)
#916    Element.updateChild (package:flutter/src/widgets/framework.dart:4037:15)
#917    ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5844:16)
#918    StatefulElement.performRebuild (package:flutter/src/widgets/framework.dart:5985:11)
#919    Element.rebuild (package:flutter/src/widgets/framework.dart:5532:7)
#920    StatefulElement.update (package:flutter/src/widgets/framework.dart:6010:5)
#921    Element.updateChild (package:flutter/src/widgets/framework.dart:4037:15)
#922    ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5844:16)
#923    Element.rebuild (package:flutter/src/widgets/framework.dart:5532:7)
#924    ProxyElement.update (package:flutter/src/widgets/framework.dart:6152:5)
#925    Element.updateChild (package:flutter/src/widgets/framework.dart:4037:15)
#926    ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5844:16)
#927    Element.rebuild (package:flutter/src/widgets/framework.dart:5532:7)
#928    ProxyElement.update (package:flutter/src/widgets/framework.dart:6152:5)
#929    Element.updateChild (package:flutter/src/widgets/framework.dart:4037:15)
#930    _RawViewElement._updateChild (package:flutter/src/widgets/view.dart:481:16)
#931    _RawViewElement.update (package:flutter/src/widgets/view.dart:568:5)
#932    Element.updateChild (package:flutter/src/widgets/framework.dart:4037:15)
#933    ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5844:16)
#934    Element.rebuild (package:flutter/src/widgets/framework.dart:5532:7)
#935    StatelessElement.update (package:flutter/src/widgets/framework.dart:5898:5)
#936    Element.updateChild (package:flutter/src/widgets/framework.dart:4037:15)
#937    ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5844:16)
#938    StatefulElement.performRebuild (package:flutter/src/widgets/framework.dart:5985:11)
#939    Element.rebuild (package:flutter/src/widgets/framework.dart:5532:7)
#940    StatefulElement.update (package:flutter/src/widgets/framework.dart:6010:5)
#941    Element.updateChild (package:flutter/src/widgets/framework.dart:4037:15)
#942    RootElement._rebuild (package:flutter/src/widgets/binding.dart:1782:16)
#943    RootElement.update (package:flutter/src/widgets/binding.dart:1760:5)
#944    RootElement.performRebuild (package:flutter/src/widgets/binding.dart:1774:7)
#945    Element.rebuild (package:flutter/src/widgets/framework.dart:5532:7)
#946    BuildScope._tryRebuild (package:flutter/src/widgets/framework.dart:2750:15)
#947    BuildScope._flushDirtyElements (package:flutter/src/widgets/framework.dart:2807:11)
#948    BuildOwner.buildScope (package:flutter/src/widgets/framework.dart:3111:18)
#949    AutomatedTestWidgetsFlutterBinding.drawFrame (package:flutter_test/src/binding.dart:1506:19)
#950    RendererBinding._handlePersistentFrameCallback (package:flutter/src/rendering/binding.dart:495:5)
#951    SchedulerBinding._invokeFrameCallback (package:flutter/src/scheduler/binding.dart:1434:15)
#952    SchedulerBinding.handleDrawFrame (package:flutter/src/scheduler/binding.dart:1347:9)
#953    AutomatedTestWidgetsFlutterBinding.pump.<anonymous closure> (package:flutter_test/src/binding.dart:1335:9)
#956    TestAsyncUtils.guard (package:flutter_test/src/test_async_utils.dart:74:41)
#957    AutomatedTestWidgetsFlutterBinding.pump (package:flutter_test/src/binding.dart:1324:27)
#958    WidgetTester.pumpWidget.<anonymous closure> (package:flutter_test/src/widget_tester.dart:598:22)
#961    TestAsyncUtils.guard (package:flutter_test/src/test_async_utils.dart:74:41)
#962    WidgetTester.pumpWidget (package:flutter_test/src/widget_tester.dart:595:27)
#963    main.<anonymous closure> (file:///app/test/features/chat/presentation/widgets/chat_input_test.dart:26:18)
#964    testWidgets.<anonymous closure>.<anonymous closure> (package:flutter_test/src/widget_tester.dart:192:29)
<asynchronous suspension>
#965    TestWidgetsFlutterBinding._runTestBody (package:flutter_test/src/binding.dart:1059:5)
<asynchronous suspension>
<asynchronous suspension>
(elided 5 frames from dart:async and package:stack_trace)

════════════════════════════════════════════════════════════════════════════════════════════════════
══╡ EXCEPTION CAUGHT BY FLUTTER TEST FRAMEWORK ╞════════════════════════════════════════════════════
The following TestFailure was thrown running a test:
Expected: exactly one matching candidate
  Actual: _TypeWidgetFinder:<Found 0 widgets with type "TextField": []>
   Which: means none were found but one was expected

When the exception was thrown, this was the stack:
#4      main.<anonymous closure> (file:///app/test/features/chat/presentation/widgets/chat_input_test.dart:42:5)
<asynchronous suspension>
#5      testWidgets.<anonymous closure>.<anonymous closure> (package:flutter_test/src/widget_tester.dart:192:15)
<asynchronous suspension>
#6      TestWidgetsFlutterBinding._runTestBody (package:flutter_test/src/binding.dart:1059:5)
<asynchronous suspension>
<asynchronous suspension>
(elided one frame from package:stack_trace)

This was caught by the test expectation on the following line:
  file:///app/test/features/chat/presentation/widgets/chat_input_test.dart line 42
The test description was:
  ChatInput has maxLength set to AppConstants.maxInputLength
════════════════════════════════════════════════════════════════════════════════════════════════════
══╡ EXCEPTION CAUGHT BY FLUTTER TEST FRAMEWORK ╞════════════════════════════════════════════════════
The following message was thrown:
Multiple exceptions (2) were detected during the running of the current test, and at least one was
unexpected.
════════════════════════════════════════════════════════════════════════════════════════════════════
00:05 +5 -1: /app/test/features/chat/presentation/widgets/chat_input_test.dart: ChatInput has maxLength set to AppConstants.maxInputLength [E]
  Test failed. See exception logs above.
  The test description was: ChatInput has maxLength set to AppConstants.maxInputLength


To run this test again: /opt/flutter/bin/cache/dart-sdk/bin/dart test /app/test/features/chat/presentation/widgets/chat_input_test.dart -p vm --plain-name 'ChatInput has maxLength set to AppConstants.maxInputLength'
00:06 +5 -1: loading /app/test/core/utils/image_decoder_test.dart                                                                                                                                      00:06 +5 -1: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder decodes images correctly                                                                                                00:06 +6 -1: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder decodes images correctly                                                                                                00:06 +6 -1: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder caches decoded images                                                                                                   00:06 +7 -1: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder caches decoded images                                                                                                   00:06 +7 -1: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder respects LRU eviction policy                                                                                            00:06 +8 -1: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder respects LRU eviction policy                                                                                            00:06 +8 -1: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder handles empty list                                                                                                      00:06 +9 -1: /app/test/core/utils/image_decoder_test.dart: IsolateImageDecoder handles empty list                                                                                                      00:06 +9 -1: loading /app/test/core/utils/url_validator_test.dart                                                                                                                                      00:06 +9 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator allows http and https                                                                                                          00:06 +10 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator allows http and https                                                                                                         00:06 +10 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator allows mailto                                                                                                                 00:06 +11 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator allows mailto                                                                                                                 00:06 +11 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator blocks javascript scheme                                                                                                      00:06 +12 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator blocks javascript scheme                                                                                                      00:06 +12 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator blocks file scheme                                                                                                            00:06 +13 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator blocks file scheme                                                                                                            00:06 +13 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator blocks unknown schemes                                                                                                        00:06 +14 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator blocks unknown schemes                                                                                                        00:06 +14 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator handles invalid uris                                                                                                          00:06 +15 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator handles invalid uris                                                                                                          00:06 +15 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator handles mixed case schemes                                                                                                    00:06 +16 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator handles mixed case schemes                                                                                                    00:06 +16 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator isHttpUrlString strictly enforces http/https                                                                                  00:06 +17 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator isHttpUrlString strictly enforces http/https                                                                                  00:07 +17 -1: /app/test/core/utils/url_validator_test.dart: UrlValidator isHttpUrlString strictly enforces http/https                                                                                  00:07 +17 -1: loading /app/test/widget_test.dart                                                                                                                                                       00:07 +17 -1: /app/test/widget_test.dart: App smoke test                                                                                                                                               00:07 +18 -1: /app/test/widget_test.dart: App smoke test                                                                                                                                               00:07 +18 -1: loading /app/test/services/storage_service_csv_injection_test.dart                                                                                                                       00:07 +18 -1: /app/test/services/storage_service_csv_injection_test.dart: StorageService CSV Injection Security exportToCsv escapes malicious formula characters                                       00:07 +18 -2: /app/test/services/storage_service_csv_injection_test.dart: StorageService CSV Injection Security exportToCsv escapes malicious formula characters [E]
  Expected: contains ',\'@SUM(1,1)'
    Actual: 'ID,Title,Model,Created At,Message Count,System Prompt\n'
              '1,\'=1+1,llama3,2023-01-01T00:00:00.000,1,"\'@SUM(1,1)"\n'
              ''
     Which: does not contain ',\'@SUM(1,1)'

  package:matcher                                             expect
  package:flutter_test/src/widget_tester.dart 473:18          expect
  test/services/storage_service_csv_injection_test.dart 51:7  main.<fn>.<fn>


To run this test again: /opt/flutter/bin/cache/dart-sdk/bin/dart test /app/test/services/storage_service_csv_injection_test.dart -p vm --plain-name 'StorageService CSV Injection Security exportToCsv escapes malicious formula characters'
00:07 +18 -2: /app/test/services/storage_service_csv_injection_test.dart: StorageService CSV Injection Security exportToCsv escapes malicious characters with quoting                                  00:07 +19 -2: /app/test/services/storage_service_csv_injection_test.dart: StorageService CSV Injection Security exportToCsv escapes malicious characters with quoting                                  00:08 +19 -2: /app/test/services/storage_service_csv_injection_test.dart: StorageService CSV Injection Security exportToCsv escapes malicious characters with quoting                                  00:08 +19 -2: loading /app/test/services/ollama_service_test.dart                                                                                                                                      00:08 +19 -2: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream prepends system prompt correctly                                                                     00:08 +20 -2: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream prepends system prompt correctly                                                                     00:08 +20 -2: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream includes options (temperature, top_p)                                                                00:08 +21 -2: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream includes options (temperature, top_p)                                                                00:08 +21 -2: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream sends correct history                                                                                00:08 +22 -2: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream sends correct history                                                                                00:08 +22 -2: loading /app/test/services/ollama_service_security_test.dart                                                                                                                             00:08 +22 -2: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl throws ArgumentError for invalid schemes                                                00:08 +23 -2: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl throws ArgumentError for invalid schemes                                                00:08 +23 -2: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl throws ArgumentError for non-url strings                                                00:08 +24 -2: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl throws ArgumentError for non-url strings                                                00:08 +24 -2: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl accepts valid http/https urls                                                           00:08 +25 -2: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl accepts valid http/https urls                                                           00:09 +25 -2: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl accepts valid http/https urls                                                           00:09 +25 -2: loading /app/test/services/storage_service_statistics_test.dart                                                                                                                          00:09 +25 -2: /app/test/services/storage_service_statistics_test.dart: StorageService Statistics Tests getUsageStatistics calculates correct values                                                    00:09 +26 -2: /app/test/services/storage_service_statistics_test.dart: StorageService Statistics Tests getUsageStatistics calculates correct values                                                    00:09 +26 -2: /app/test/services/storage_service_statistics_test.dart: StorageService Statistics Tests getUsageStatistics handles empty data                                                           00:09 +27 -2: /app/test/services/storage_service_statistics_test.dart: StorageService Statistics Tests getUsageStatistics handles empty data                                                           00:09 +27 -2: loading /app/test/services/storage_service_settings_export_test.dart                                                                                                                     00:09 +27 -2: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData includes settings when requested                                           00:09 +28 -2: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData includes settings when requested                                           00:09 +28 -2: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData excludes settings when not requested                                       00:09 +29 -2: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData excludes settings when not requested                                       00:09 +29 -2: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData excludes settings by default                                               00:09 +30 -2: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData excludes settings by default                                               00:10 +30 -2: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData excludes settings by default                                               00:10 +30 -2: loading /app/test/services/storage_service_pin_test.dart                                                                                                                                 00:10 +30 -2: /app/test/services/storage_service_pin_test.dart: StorageService Pinning togglePin adds and removes pin and logs activity                                                                00:10 +31 -2: /app/test/services/storage_service_pin_test.dart: StorageService Pinning togglePin adds and removes pin and logs activity                                                                00:10 +31 -2: loading /app/test/services/pdf_export_service_test.dart                                                                                                                                  00:10 +31 -2: /app/test/services/pdf_export_service_test.dart: PdfExportService generates PDF data                                                                                                     00:10 +31 -2: /app/test/services/pdf_export_service_test.dart: PdfExportService generates PDF data
Helvetica-Bold has no Unicode support see https://github.com/DavBfr/dart_pdf/wiki/Fonts-Management
Helvetica has no Unicode support see https://github.com/DavBfr/dart_pdf/wiki/Fonts-Management
Unable to find a font to draw "•" (U+2022) try to provide a TextStyle.fontFallback
00:10 +32 -2: /app/test/services/pdf_export_service_test.dart: PdfExportService generates PDF data                                                                                                     00:11 +32 -2: /app/test/services/pdf_export_service_test.dart: PdfExportService generates PDF data                                                                                                     00:11 +32 -2: loading /app/test/services/storage_service_markdown_test.dart                                                                                                                            00:11 +32 -2: /app/test/services/storage_service_markdown_test.dart: StorageService - Markdown Export Escapes malicious Markdown structure in messages                                                 00:11 +33 -2: /app/test/services/storage_service_markdown_test.dart: StorageService - Markdown Export Escapes malicious Markdown structure in messages                                                 00:11 +33 -2: /app/test/services/storage_service_markdown_test.dart: StorageService - Markdown Export Preserves multiline content in blockquotes                                                       00:11 +34 -2: /app/test/services/storage_service_markdown_test.dart: StorageService - Markdown Export Preserves multiline content in blockquotes                                                       00:11 +34 -2: /app/test/services/storage_service_markdown_test.dart: StorageService - Markdown Export Escapes malicious Markdown structure in system prompt                                            00:11 +35 -2: /app/test/services/storage_service_markdown_test.dart: StorageService - Markdown Export Escapes malicious Markdown structure in system prompt                                            00:11 +35 -2: loading /app/test/services/storage_service_export_test.dart                                                                                                                              00:11 +35 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportData filters by chatIds                                                                           00:11 +36 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportData filters by chatIds                                                                           00:11 +36 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportData includes all if chatIds is null                                                              00:11 +37 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportData includes all if chatIds is null                                                              00:11 +37 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportToCsv filters by chatIds                                                                          00:11 +38 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportToCsv filters by chatIds                                                                          00:11 +38 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportToMarkdown filters by chatIds                                                                     00:11 +39 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportToMarkdown filters by chatIds                                                                     00:12 +39 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportToMarkdown filters by chatIds                                                                     00:12 +39 -2: loading /app/test/services/storage_service_log_test.dart                                                                                                                                 00:12 +39 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportData logs activity                                                                               00:12 +40 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportData logs activity                                                                               00:12 +40 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportToCsv logs activity                                                                              00:12 +41 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportToCsv logs activity                                                                              00:12 +41 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportToMarkdown logs activity                                                                         00:12 +42 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportToMarkdown logs activity                                                                         00:12 +42 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportActivityLogsToCsv logs activity and returns correct format                                       00:12 +43 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportActivityLogsToCsv logs activity and returns correct format                                       00:12 +43 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportActivityLogsToJson logs activity and returns correct format                                      00:12 +44 -2: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportActivityLogsToJson logs activity and returns correct format                                      00:12 +44 -2: loading /app/test/services/ollama_service_pull_streaming_test.dart                                                                                                                       00:12 +44 -2: /app/test/services/ollama_service_pull_streaming_test.dart: OllamaService Pull Streaming Tests pullModel handles split JSON chunks correctly                                             00:12 +45 -2: /app/test/services/ollama_service_pull_streaming_test.dart: OllamaService Pull Streaming Tests pullModel handles split JSON chunks correctly                                             00:13 +45 -2: /app/test/services/ollama_service_pull_streaming_test.dart: OllamaService Pull Streaming Tests pullModel handles split JSON chunks correctly                                             00:13 +45 -2: loading /app/test/services/storage_service_search_test.dart                                                                                                                              00:13 +45 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by query (case insensitive)                                                             00:13 +46 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by query (case insensitive)                                                             00:13 +46 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by query (no match)                                                                     00:13 +47 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by query (no match)                                                                     00:13 +47 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by message content                                                                      00:13 +48 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by message content                                                                      00:13 +48 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by message content (assistant response)                                                 00:13 +49 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by message content (assistant response)                                                 00:13 +49 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Filter by Model                                                                                00:13 +50 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Filter by Model                                                                                00:13 +50 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Filter by Date (Last 7 days)                                                                   00:13 +51 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Filter by Date (Last 7 days)                                                                   00:13 +51 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Combined Filter (Query + Model)                                                                00:13 +52 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Combined Filter (Query + Model)                                                                00:13 +52 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Combined Filter (Query + Date)                                                                 00:13 +53 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Combined Filter (Query + Date)                                                                 00:13 +53 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Get Available Models                                                                           00:13 +54 -2: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Get Available Models                                                                           00:13 +54 -2: loading /app/test/services/csv_security_test.dart                                                                                                                                        00:13 +54 -2: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with dangerous characters                                                                00:13 +55 -2: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with dangerous characters                                                                00:13 +55 -2: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with Tab and Carriage Return                                                             00:13 +56 -2: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with Tab and Carriage Return                                                             00:13 +56 -2: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with whitespace and dangerous characters                                                 00:13 +57 -2: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with whitespace and dangerous characters                                                 00:14 +57 -2: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with whitespace and dangerous characters                                                 00:14 +57 -2: loading /app/test/services/ollama_service_streaming_test.dart                                                                                                                            00:14 +57 -2: /app/test/services/ollama_service_streaming_test.dart: OllamaService Streaming Tests generateChatStream handles split JSON chunks correctly                                              00:14 +57 -2: /app/test/services/ollama_service_streaming_test.dart: OllamaService Streaming Tests generateChatStream handles split JSON chunks correctly
Collected output: [Hello , world!]
00:14 +58 -2: /app/test/services/ollama_service_streaming_test.dart: OllamaService Streaming Tests generateChatStream handles split JSON chunks correctly                                              00:14 +58 -2: Some tests failed.
