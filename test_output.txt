00:00 +0: loading /app/test/services/storage_service_csv_injection_test.dart                                                                                                                           00:01 +0: loading /app/test/services/storage_service_csv_injection_test.dart                                                                                                                           00:02 +0: loading /app/test/services/storage_service_csv_injection_test.dart                                                                                                                           00:03 +0: loading /app/test/services/storage_service_csv_injection_test.dart                                                                                                                           00:03 +0: /app/test/services/storage_service_csv_injection_test.dart: StorageService CSV Injection Security exportToCsv escapes malicious formula characters                                           00:03 +0 -1: /app/test/services/storage_service_csv_injection_test.dart: StorageService CSV Injection Security exportToCsv escapes malicious formula characters [E]
  Expected: contains ',\'@SUM(1,1)'
    Actual: 'ID,Title,Model,Created At,Message Count,System Prompt\n'
              '1,\'=1+1,llama3,2023-01-01T00:00:00.000,1,"\'@SUM(1,1)"\n'
              ''
     Which: does not contain ',\'@SUM(1,1)'

  package:matcher                                             expect
  package:flutter_test/src/widget_tester.dart 473:18          expect
  test/services/storage_service_csv_injection_test.dart 51:7  main.<fn>.<fn>


To run this test again: /opt/flutter/bin/cache/dart-sdk/bin/dart test /app/test/services/storage_service_csv_injection_test.dart -p vm --plain-name 'StorageService CSV Injection Security exportToCsv escapes malicious formula characters'
00:03 +0 -1: /app/test/services/storage_service_csv_injection_test.dart: StorageService CSV Injection Security exportToCsv escapes malicious characters with quoting                                   00:03 +1 -1: /app/test/services/storage_service_csv_injection_test.dart: StorageService CSV Injection Security exportToCsv escapes malicious characters with quoting                                   00:03 +1 -1: loading /app/test/services/ollama_service_test.dart                                                                                                                                       00:03 +1 -1: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream prepends system prompt correctly                                                                      00:03 +2 -1: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream prepends system prompt correctly                                                                      00:03 +2 -1: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream includes options (temperature, top_p)                                                                 00:03 +3 -1: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream includes options (temperature, top_p)                                                                 00:03 +3 -1: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream sends correct history                                                                                 00:03 +4 -1: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream sends correct history                                                                                 00:04 +4 -1: /app/test/services/ollama_service_test.dart: OllamaService Tests generateChatStream sends correct history                                                                                 00:04 +4 -1: loading /app/test/services/ollama_service_security_test.dart                                                                                                                              00:04 +4 -1: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl throws ArgumentError for invalid schemes                                                 00:04 +5 -1: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl throws ArgumentError for invalid schemes                                                 00:04 +5 -1: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl throws ArgumentError for non-url strings                                                 00:04 +6 -1: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl throws ArgumentError for non-url strings                                                 00:04 +6 -1: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl accepts valid http/https urls                                                            00:04 +7 -1: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl accepts valid http/https urls                                                            00:05 +7 -1: /app/test/services/ollama_service_security_test.dart: OllamaService Security Tests updateBaseUrl accepts valid http/https urls                                                            00:05 +7 -1: loading /app/test/services/storage_service_statistics_test.dart                                                                                                                           00:05 +7 -1: /app/test/services/storage_service_statistics_test.dart: StorageService Statistics Tests getUsageStatistics calculates correct values                                                     00:05 +8 -1: /app/test/services/storage_service_statistics_test.dart: StorageService Statistics Tests getUsageStatistics calculates correct values                                                     00:05 +8 -1: /app/test/services/storage_service_statistics_test.dart: StorageService Statistics Tests getUsageStatistics handles empty data                                                            00:05 +9 -1: /app/test/services/storage_service_statistics_test.dart: StorageService Statistics Tests getUsageStatistics handles empty data                                                            00:05 +9 -1: loading /app/test/services/storage_service_settings_export_test.dart                                                                                                                      00:05 +9 -1: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData includes settings when requested                                            00:05 +10 -1: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData includes settings when requested                                           00:05 +10 -1: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData excludes settings when not requested                                       00:05 +11 -1: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData excludes settings when not requested                                       00:05 +11 -1: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData excludes settings by default                                               00:05 +12 -1: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData excludes settings by default                                               00:06 +12 -1: /app/test/services/storage_service_settings_export_test.dart: StorageService Settings Export Tests exportData excludes settings by default                                               00:06 +12 -1: loading /app/test/services/storage_service_pin_test.dart                                                                                                                                 00:06 +12 -1: /app/test/services/storage_service_pin_test.dart: StorageService Pinning togglePin adds and removes pin and logs activity                                                                00:06 +13 -1: /app/test/services/storage_service_pin_test.dart: StorageService Pinning togglePin adds and removes pin and logs activity                                                                00:06 +13 -1: loading /app/test/services/pdf_export_service_test.dart                                                                                                                                  00:06 +13 -1: /app/test/services/pdf_export_service_test.dart: PdfExportService generates PDF data                                                                                                     00:06 +13 -1: /app/test/services/pdf_export_service_test.dart: PdfExportService generates PDF data
Helvetica-Bold has no Unicode support see https://github.com/DavBfr/dart_pdf/wiki/Fonts-Management
Helvetica has no Unicode support see https://github.com/DavBfr/dart_pdf/wiki/Fonts-Management
Unable to find a font to draw "â€¢" (U+2022) try to provide a TextStyle.fontFallback
00:06 +14 -1: /app/test/services/pdf_export_service_test.dart: PdfExportService generates PDF data                                                                                                     00:07 +14 -1: /app/test/services/pdf_export_service_test.dart: PdfExportService generates PDF data                                                                                                     00:07 +14 -1: loading /app/test/services/storage_service_markdown_test.dart                                                                                                                            00:07 +14 -1: /app/test/services/storage_service_markdown_test.dart: StorageService - Markdown Export Escapes malicious Markdown structure in messages                                                 00:07 +15 -1: /app/test/services/storage_service_markdown_test.dart: StorageService - Markdown Export Escapes malicious Markdown structure in messages                                                 00:07 +15 -1: /app/test/services/storage_service_markdown_test.dart: StorageService - Markdown Export Preserves multiline content in blockquotes                                                       00:07 +16 -1: /app/test/services/storage_service_markdown_test.dart: StorageService - Markdown Export Preserves multiline content in blockquotes                                                       00:07 +16 -1: loading /app/test/services/storage_service_export_test.dart                                                                                                                              00:07 +16 -1: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportData filters by chatIds                                                                           00:07 +16 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportData filters by chatIds [E]
  LateInitializationError: Field '_systemPromptBox@23089923' has not been initialized.
  package:pocketllm_lite/services/storage_service.dart         StorageService._systemPromptBox
  package:pocketllm_lite/services/storage_service.dart 175:12  StorageService.getSystemPrompts
  package:pocketllm_lite/services/storage_service.dart 575:11  StorageService.exportData
  test/services/storage_service_export_test.dart 64:30         main.<fn>.<fn>


To run this test again: /opt/flutter/bin/cache/dart-sdk/bin/dart test /app/test/services/storage_service_export_test.dart -p vm --plain-name 'StorageService Export Tests exportData filters by chatIds'
00:07 +16 -2: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportData includes all if chatIds is null                                                              00:08 +16 -3: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportData includes all if chatIds is null [E]
  LateInitializationError: Field '_systemPromptBox@23089923' has not been initialized.
  package:pocketllm_lite/services/storage_service.dart         StorageService._systemPromptBox
  package:pocketllm_lite/services/storage_service.dart 175:12  StorageService.getSystemPrompts
  package:pocketllm_lite/services/storage_service.dart 575:11  StorageService.exportData
  test/services/storage_service_export_test.dart 74:30         main.<fn>.<fn>


To run this test again: /opt/flutter/bin/cache/dart-sdk/bin/dart test /app/test/services/storage_service_export_test.dart -p vm --plain-name 'StorageService Export Tests exportData includes all if chatIds is null'
00:08 +16 -3: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportToCsv filters by chatIds                                                                          00:08 +17 -3: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportToCsv filters by chatIds                                                                          00:08 +17 -3: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportToMarkdown filters by chatIds                                                                     00:08 +18 -3: /app/test/services/storage_service_export_test.dart: StorageService Export Tests exportToMarkdown filters by chatIds                                                                     00:08 +18 -3: loading /app/test/services/storage_service_log_test.dart                                                                                                                                 00:08 +18 -3: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportData logs activity                                                                               00:08 +19 -3: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportData logs activity                                                                               00:08 +19 -3: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportToCsv logs activity                                                                              00:08 +20 -3: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportToCsv logs activity                                                                              00:08 +20 -3: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportToMarkdown logs activity                                                                         00:08 +21 -3: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportToMarkdown logs activity                                                                         00:08 +21 -3: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportActivityLogsToCsv logs activity and returns correct format                                       00:08 +22 -3: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportActivityLogsToCsv logs activity and returns correct format                                       00:08 +22 -3: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportActivityLogsToJson logs activity and returns correct format                                      00:08 +23 -3: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportActivityLogsToJson logs activity and returns correct format                                      00:09 +23 -3: /app/test/services/storage_service_log_test.dart: StorageService Activity Logging exportActivityLogsToJson logs activity and returns correct format                                      00:09 +23 -3: loading /app/test/services/ollama_service_pull_streaming_test.dart                                                                                                                       00:09 +23 -3: /app/test/services/ollama_service_pull_streaming_test.dart: OllamaService Pull Streaming Tests pullModel handles split JSON chunks correctly                                             00:09 +24 -3: /app/test/services/ollama_service_pull_streaming_test.dart: OllamaService Pull Streaming Tests pullModel handles split JSON chunks correctly                                             00:09 +24 -3: loading /app/test/services/storage_service_search_test.dart                                                                                                                              00:09 +24 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by query (case insensitive)                                                             00:09 +25 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by query (case insensitive)                                                             00:09 +25 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by query (no match)                                                                     00:09 +26 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by query (no match)                                                                     00:09 +26 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by message content                                                                      00:09 +27 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by message content                                                                      00:09 +27 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by message content (assistant response)                                                 00:09 +28 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Search by message content (assistant response)                                                 00:09 +28 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Filter by Model                                                                                00:09 +29 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Filter by Model                                                                                00:09 +29 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Filter by Date (Last 7 days)                                                                   00:09 +30 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Filter by Date (Last 7 days)                                                                   00:09 +30 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Combined Filter (Query + Model)                                                                00:09 +31 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Combined Filter (Query + Model)                                                                00:09 +31 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Combined Filter (Query + Date)                                                                 00:09 +32 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Combined Filter (Query + Date)                                                                 00:09 +32 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Get Available Models                                                                           00:09 +33 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Get Available Models                                                                           00:10 +33 -3: /app/test/services/storage_service_search_test.dart: StorageService Search & Filter Logic Get Available Models                                                                           00:10 +33 -3: loading /app/test/services/csv_security_test.dart                                                                                                                                        00:10 +33 -3: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with dangerous characters                                                                00:10 +34 -3: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with dangerous characters                                                                00:10 +34 -3: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with Tab and Carriage Return                                                             00:10 +35 -3: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with Tab and Carriage Return                                                             00:10 +35 -3: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with whitespace and dangerous characters                                                 00:10 +36 -3: /app/test/services/csv_security_test.dart: CSV Injection Security Should escape fields starting with whitespace and dangerous characters                                                 00:10 +36 -3: loading /app/test/services/ollama_service_streaming_test.dart                                                                                                                            00:10 +36 -3: /app/test/services/ollama_service_streaming_test.dart: OllamaService Streaming Tests generateChatStream handles split JSON chunks correctly                                              00:10 +36 -3: /app/test/services/ollama_service_streaming_test.dart: OllamaService Streaming Tests generateChatStream handles split JSON chunks correctly
Collected output: [Hello , world!]
00:10 +37 -3: /app/test/services/ollama_service_streaming_test.dart: OllamaService Streaming Tests generateChatStream handles split JSON chunks correctly                                              00:10 +37 -3: Some tests failed.
